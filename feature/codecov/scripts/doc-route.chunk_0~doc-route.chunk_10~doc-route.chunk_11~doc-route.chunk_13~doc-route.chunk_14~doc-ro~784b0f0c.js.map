{"version":3,"sources":["webpack://payex/./src/App/Documentation/utils/ComponentPreview/index.js"],"names":["ComponentPreview","_ref","children","language","removeOuterTag","hideValue","removeList","showCasePanel","codeFigure","dangerousHTML","_removeOuterTag","element","div","document","createElement","innerHTML","renderToStaticMarkup","firstElementChild","firstChild","nodeValue","_removeList","listElements","querySelectorAll","htmlString","forEach","el","concat","react__WEBPACK_IMPORTED_MODULE_0___default","a","Fragment","className","val","code","v","map","child","_typeof","console","warn","jsbeautifier","html_beautify","replace","css","defaultProps","style","prism_react_renderer__WEBPACK_IMPORTED_MODULE_4__","_extends","theme","undefined","_ref2","tokens","getLineProps","getTokenProps","line","i","key","token","propTypes","PropTypes","oneOf","isRequired","bool"],"mappings":"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","file":"scripts/doc-route.chunk_0~doc-route.chunk_10~doc-route.chunk_11~doc-route.chunk_13~doc-route.chunk_14~doc-ro~784b0f0c.js?eaa503b88bceee675495","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { renderToStaticMarkup } from \"react-dom/server\";\nimport jsbeautifier from \"js-beautify\";\nimport Highlight, { defaultProps } from \"prism-react-renderer\";\n\n// NOTE: dangerousHTML prop is used when wanting to show html in the codefigure without encoding.\n\nconst ComponentPreview = ({ children, language, removeOuterTag, hideValue, removeList, showCasePanel, codeFigure, dangerousHTML }) => {\n    const _removeOuterTag = element => {\n        const div = document.createElement(\"div\");\n\n        div.innerHTML = renderToStaticMarkup(element);\n\n        if (div.firstElementChild) {\n            return div.firstElementChild.innerHTML;\n        } else if (div.firstChild) {\n            return div.firstChild.nodeValue;\n        }\n\n        return \"Check ComponentPreview _removeOuterTag!\";\n    };\n\n    const _removeList = element => {\n        const div = document.createElement(\"div\");\n\n        div.innerHTML = renderToStaticMarkup(element);\n\n        const listElements = div.querySelectorAll(\"li\");\n        let htmlString = \"\";\n\n        listElements.forEach(el => {\n            htmlString += `${el.innerHTML} \\n`;\n        });\n\n        return htmlString;\n    };\n\n    const _removeEmpty = val => {\n        val = val.replace(/=\"\"/g, \"\");\n        val = val.replace(/ class>/g, \">\");\n        val = val.replace(/ class /g, \" \");\n        val = val.replace(/value /g, \"\");\n\n        return val;\n    };\n\n    const setDangerousHtml = val => {\n        let code = \"\";\n\n        if (typeof val.forEach === \"function\") {\n            val.forEach(v => code += `${v}\\n`);\n        } else {\n            code = val;\n        }\n\n        return code;\n    };\n\n    const CodeFigure = () => {\n        let code = \"\";\n\n        if (language === \"html\" && dangerousHTML) {\n            code = setDangerousHtml(children);\n        } else if (language === \"html\" && children && typeof children.map === \"function\") {\n            children.map(child => {\n                if (removeOuterTag) {\n                    code += _removeOuterTag(child);\n                } else if (removeList) {\n                    code += _removeList(child);\n                } else {\n                    code += renderToStaticMarkup(child);\n                }\n            });\n\n        } else if (language === \"html\") {\n            if (removeOuterTag) {\n                code += _removeOuterTag(children);\n            } else if (removeList) {\n                code += _removeList(children);\n            } else {\n                code += renderToStaticMarkup(children);\n            }\n        } else {\n            switch (typeof children) {\n                case \"string\":\n                    code = children;\n\n                    break;\n                case \"object\":\n                    children.forEach(child => code += child);\n\n                    break;\n                default:\n                    console.warn(\"CodeFigure: children needs attention!\");\n            }\n        }\n\n        switch (language) {\n            case \"html\":\n                code = jsbeautifier.html_beautify(code);\n                code = _removeEmpty(code);\n\n                if (hideValue) {\n                    code = code.replace(/ value=\"(.*)\"/g, \"\");\n                }\n\n                break;\n            case \"css\":\n                code = jsbeautifier.css(code);\n\n                break;\n            case \"javascript\":\n                // This is not needed, and for some reason crashes after a prod build [EH]\n                // code = jsbeautifier(code);\n                break;\n            default:\n                return \"update switchcase!\";\n        }\n\n        defaultProps.style = \"\";\n\n        return (\n            <figure>\n                {/* keep theme as undefined to apply default prism theme */}\n                <Highlight {...defaultProps} theme={undefined} code={code} language={language}>\n                    {({ className, style, tokens, getLineProps, getTokenProps }) => (\n                        <pre className={className} style={style}>\n                            {tokens.map((line, i) => (\n                                <div key={line + i} {...getLineProps({ line,\n                                    key: i })}>\n                                    {line.map((token, key) => (\n                                        <span key={key} {...getTokenProps({ token,\n                                            key })} />\n                                    ))}\n                                </div>\n                            ))}\n                        </pre>\n                    )}\n                </Highlight>\n            </figure>\n        );\n    };\n\n    const ShowCasePanel = () => (\n        <div className=\"showcase-panel\">\n            {children}\n        </div>\n    );\n\n    return (\n        <>\n            {showCasePanel ? <ShowCasePanel /> : null}\n            {codeFigure ? <CodeFigure /> : null}\n        </>\n    );\n};\n\nComponentPreview.propTypes = {\n    language: PropTypes.oneOf([\"html\", \"javascript\", \"css\"]).isRequired,\n    removeOuterTag: PropTypes.bool,\n    hideValue: PropTypes.bool,\n    removeList: PropTypes.bool,\n    showCasePanel: PropTypes.bool,\n    codeFigure: PropTypes.bool,\n    dangerousHTML: PropTypes.bool\n};\n\nexport default ComponentPreview;\n"],"sourceRoot":""}