@import "../global.less";

@dialog-border: 1px solid @light-gray;

.dialog {
	position: fixed;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	z-index: var(--dialog-z-index, 600);
	background: fade(@black, 50%);
	display: none;
	justify-content: center;
	align-items: center;

	> section {
		position: relative;
		max-width: 500px;

		.dialog-header,
		header {
			display: flex;
			padding: 1rem 1.5rem;
			align-items: center;
			background: @white;
			border-bottom: @dialog-border;
			border-radius: 20px 20px 0 0;

			/* stylelint-disable selector-list-comma-newline-after */
			h1,
			h2,
			h3,
			h4,
			h5,
			h6,
			.h1,
			.h2,
			.h3,
			.h4,
			.h5,
			.h6 {
				margin-top: 0;
				margin-bottom: 0;
				flex-grow: 1;
			}
			/* stylelint-enable selector-list-comma-newline-after */

			.dialog-close {
				display: inline-grid;
				position: relative;
				touch-action: manipulation;
				cursor: pointer;
				user-select: none;
				background-color: transparent;
				border: none;
				padding: 0;
				margin-right: -0.5rem;
				height: 24px;
				width: 24px;

				&:hover,
				&.hover {
					color: var(--brand-secondary);
					text-decoration: none;
					background-color: @brand-bg-gray;
				}

				&:focus {
					border: none;
					border-radius: 0.125rem;
					box-shadow: 0 0 0 2px @black;
					outline: none;
				}

				&[active],
				&:active,
				&.active {
					outline: 0;
					background-image: none;
					box-shadow: none;

					&:focus,
					&.focus {
						box-shadow: none;
					}
				}

				// conditional check to ensure no duplicate close cross if not done migration from close icon element to no icon element needed
				// maybe can remove it in next major release or better next real rewrite with breaking changes
				&:not(:has(i)) {
					&:before,
					&:after {
						content: "";
						width: 18px;
						height: 2px;
						background-color: var(--black);
						place-self: center;
						position: absolute;
					}

					&:before {
						transform: rotate(45deg);
					}

					&:after {
						transform: rotate(-45deg);
					}
				}
			}
		}

		.dialog-body {
			background: @white;
			padding: 2rem 1.5rem;
		}

		.dialog-footer,
		footer {
			background: @white;
			border-top: @dialog-border;
			padding: 1rem 1.5rem;
			margin: 0;
			display: flex;
			justify-content: flex-end;
			border-radius: 0 0 20px 20px;

			> * {
				margin: 0 0.25rem;
			}
		}
	}
}

.dialog-open {
	overflow: hidden;

	.dialog {
		overflow-x: hidden;
		overflow-y: auto;
	}
}

@media (forced-colors: active) {
	.dialog {
		border: 10px solid;

		> section {
			outline: 10px solid;

			.dialog-header,
			.header {
				.dialog-close {
					&:focus {
						outline: 2px solid;
					}

					&[active],
					&:active,
					&.active {
						&:focus,
						&.focus {
							outline: 2px solid;
						}
					}
				}
			}
		}
	}
}
